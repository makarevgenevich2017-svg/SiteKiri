<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã –†–æ—Å—Ç–æ–≤–∞</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8fdf9;
            color: #333;
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .auth-modal.active {
            display: flex;
        }

        .auth-container {
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            margin: 20px;
        }

        .auth-title {
            text-align: center;
            margin-bottom: 25px;
            color: #2c3e50;
            font-size: 24px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-input {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            width: 100%;
        }

        .auth-button {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        .auth-button:hover {
            background-color: #388e3c;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: #7f8c8d;
        }

        .auth-switch span {
            color: #4caf50;
            cursor: pointer;
            font-weight: bold;
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô */
        /* Header Styles */
        header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
            max-width: 100vw;
        }

        .logo {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #4caf50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
            flex: 1;
            justify-content: center;
            max-width: calc(100vw - 80px);
            overflow: hidden;
        }

        .nav-tab {
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .nav-tab.active {
            background-color: #4caf50;
            color: white;
        }

        .nav-tab:hover:not(.active) {
            background-color: #e8f5e9;
        }

        .profile-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #4caf50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* Page Container */
        .page-container {
            display: none;
            padding: 15px;
            min-height: calc(100vh - 60px);
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
        }

        .page-container.active {
            display: block;
        }

        /* Main Page Styles */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
            width: 100%;
        }

        .card {
            background-color: white;
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            overflow: hidden;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
            width: 100%;
        }

        .name {
            font-weight: bold;
            font-size: 18px;
        }

        .specialty {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #f39c12;
            font-weight: bold;
        }

        .star {
            color: #f39c12;
        }

        .book-btn {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .book-btn:hover {
            background-color: #388e3c;
        }

        .show-schedule-btn, .show-services-btn {
            background-color: #e8f5e9;
            color: #4caf50;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            width: 100%;
        }

        .cancel-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        .cancel-btn:hover {
            background-color: #d32f2f;
        }

        /* Horizontal Schedule - FIXED */
        .horizontal-schedule-container {
            width: 100%;
            overflow: hidden;
            margin: 15px 0;
            display: none;
        }

        .horizontal-schedule-container.active {
            display: block;
        }

        .horizontal-schedule {
            display: flex;
            gap: 10px;
            padding-bottom: 10px;
            width: max-content;
            max-width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .horizontal-schedule::-webkit-scrollbar {
            height: 6px;
        }

        .horizontal-schedule::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .horizontal-schedule::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .horizontal-schedule::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        .schedule-item {
            min-width: 100px;
            padding: 10px;
            border-radius: 10px;
            background-color: #f1f8e9;
            text-align: center;
            flex-shrink: 0;
        }

        .schedule-day {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .schedule-time {
            font-size: 12px;
            color: #666;
        }

        /* Search Page Styles */
        #map-container {
            height: 400px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
            width: 100%;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .search-bar {
            display: flex;
            margin-top: 20px;
            position: sticky;
            bottom: 15px;
            background-color: #f8fdf9;
            padding: 10px 0;
            width: 100%;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px 0 0 25px;
            font-size: 16px;
            outline: none;
            background-color: white;
            min-width: 0;
        }

        .search-bar button {
            padding: 12px 20px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            font-weight: bold;
            flex-shrink: 0;
        }

        .specialist-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-top: 15px;
            display: none;
            position: relative;
            width: 100%;
        }

        .specialist-card.active {
            display: block;
        }

        .close-card-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #7f8c8d;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-card-btn:hover {
            background-color: #f5f5f5;
        }

        /* Services Section */
        .services-section {
            margin: 20px 0;
            display: none;
        }

        .services-section.active {
            display: block;
        }

        .services-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .service-card {
            background-color: #f9f9f9;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .service-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
        }

        .service-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .service-price {
            color: #4caf50;
            font-weight: bold;
        }

        /* Booking Modal */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .booking-modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .time-slot {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-slot.selected {
            background-color: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .time-slot.disabled {
            background-color: #f5f5f5;
            color: #aaa;
            cursor: not-allowed;
        }

        .confirm-booking {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
        }

        .day-off-message, .no-time-message {
            color: #f44336;
            text-align: center;
            padding: 10px;
            background-color: #ffebee;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* Appointments Page */
        .appointments-list {
            margin-top: 20px;
        }

        .appointment-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .appointment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .appointment-specialist {
            font-weight: bold;
            font-size: 18px;
        }

        .appointment-service {
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .appointment-time {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .countdown {
            font-weight: bold;
            color: #e74c3c;
        }

        .progress-bar {
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress {
            height: 100%;
            background-color: #4caf50;
            border-radius: 4px;
            transition: width 0.5s;
        }

        .specialist-phone {
            margin-top: 15px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        /* Profile Panel */
        .profile-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 85%;
            max-width: 350px;
            height: 100vh;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .profile-panel.active {
            right: 0;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #4caf50;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .profile-name {
            font-size: 18px;
            font-weight: bold;
        }

        .profile-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .profile-menu-item {
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
            background-color: #f1f8e9;
        }

        .profile-menu-item:hover {
            background-color: #e8f5e9;
        }

        /* –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—ã—Ö–æ–¥–∞ */
        .auth-action-btn {
            margin-top: auto;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
            font-weight: bold;
        }

        .register-btn {
            background-color: #e3f2fd;
            color: #1976d2;
        }

        .register-btn:hover {
            background-color: #bbdefb;
        }

        .logout-btn {
            background-color: #ffebee;
            color: #f44336;
        }

        .logout-btn:hover {
            background-color: #ffcdd2;
        }

        /* Development Message */
        .development-message {
            text-align: center;
            padding: 50px 20px;
            color: #7f8c8d;
            font-size: 18px;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .nav-tabs {
                gap: 5px;
                max-width: calc(100vw - 70px);
            }
            
            .nav-tab {
                padding: 8px 10px;
                font-size: 13px;
            }
            
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            #map-container {
                height: 300px;
            }
            
            .profile-panel {
                width: 85%;
            }
            
            .schedule-item {
                min-width: 90px;
                padding: 8px;
            }
            
            .schedule-day {
                font-size: 13px;
            }
            
            .schedule-time {
                font-size: 11px;
            }

            .services-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .nav-tab {
                padding: 6px 8px;
                font-size: 12px;
            }
            
            .card {
                padding: 15px;
            }
            
            .profile-panel {
                width: 90%;
            }
            
            .schedule-item {
                min-width: 85px;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .time-slots {
                grid-template-columns: 1fr;
            }
        }

        /* Prevent horizontal scroll on body */
        html, body {
            overflow-x: hidden;
            max-width: 100%;
        }

        /* Category Filter */
        .category-filter {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .category-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background-color: white;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .category-btn.active {
            background-color: #4caf50;
            color: white;
            border-color: #4caf50;
        }
    </style>
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <h2 class="auth-title" id="authTitle">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <div class="auth-form">
                <input type="text" class="auth-input" id="authName" placeholder="–ò–º—è">
                <input type="password" class="auth-input" id="authPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                <button class="auth-button" id="authButton">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <div class="auth-switch">
                    <span id="authSwitch">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div id="mainApp">
        <!-- Header -->
        <header>
            <div class="logo">–ø</div>
            <div class="nav-tabs">
                <div class="nav-tab active" data-page="main">–ì–ª–∞–≤–Ω–∞—è</div>
                <div class="nav-tab" data-page="search">–ü–æ–∏—Å–∫</div>
                <div class="nav-tab" data-page="appointments">–ó–∞–ø–∏—Å–∏</div>
                <div class="nav-tab" data-page="favorites">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</div>
            </div>
            <div class="profile-btn" id="profileBtn">–ö</div>
        </header>

        <!-- Main Page -->
        <div class="page-container active" id="main-page">
            <h1>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</h1>
            <div class="category-filter" id="categoryFilter">
                <button class="category-btn active" data-category="all">–í—Å–µ</button>
                <button class="category-btn" data-category="cleaning">–ö–ª–∏–Ω–∏–Ω–≥</button>
                <button class="category-btn" data-category="cooking">–ü–æ–≤–∞—Ä–∞</button>
                <button class="category-btn" data-category="beauty">–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—ã</button>
                <button class="category-btn" data-category="design">–î–∏–∑–∞–π–Ω–µ—Ä—ã</button>
                <button class="category-btn" data-category="companies">–ö–æ–º–ø–∞–Ω–∏–∏</button>
                <button class="category-btn" data-category="plumbing">–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞</button>
                <button class="category-btn" data-category="manicure">–ú–∞–Ω–∏–∫—é—Ä</button>
                <button class="category-btn" data-category="water">–î–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã</button>
                <button class="category-btn" data-category="moving">–ü–µ—Ä–µ–µ–∑–¥—ã</button>
                <button class="category-btn" data-category="barber">–ë–∞—Ä–±–µ—Ä—ã</button>
            </div>
            <div class="cards-container" id="cardsContainer">
                <!-- Cards will be generated here -->
            </div>
        </div>

        <!-- Search Page -->
        <div class="page-container" id="search-page">
            <h1>–ü–æ–∏—Å–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</h1>
            <div id="map-container">
                <div id="map"></div>
            </div>
            <div class="specialist-card" id="specialistCard">
                <button class="close-card-btn" id="closeCardBtn">√ó</button>
                <div class="card-header">
                    <div class="name" id="specialistName">–ú–∞–∫–∞—Ä</div>
                    <div class="specialty" id="specialistSpecialty">IT —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</div>
                    <div class="rating">
                        <span class="star">‚òÖ</span>
                        <span id="specialistRating">5.0</span>
                    </div>
                </div>
                
                <button class="show-services-btn" id="showServicesBtn">–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥–∏</button>
                
                <div class="services-section" id="servicesSection">
                    <h3 class="services-title">–£—Å–ª—É–≥–∏</h3>
                    <div class="services-grid" id="servicesGrid">
                        <!-- Services will be added here -->
                    </div>
                </div>
                
                <h3>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</h3>
                <div class="horizontal-schedule-container active" id="horizontalScheduleContainer">
                    <div class="horizontal-schedule" id="horizontalSchedule">
                        <!-- Horizontal schedule will be added here -->
                    </div>
                </div>
                <button class="book-btn" id="openBookingBtn">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å...">
                <button>–ü–æ–∏—Å–∫</button>
            </div>
        </div>

        <!-- Appointments Page -->
        <div class="page-container" id="appointments-page">
            <h1>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</h1>
            <div class="appointments-list" id="appointmentsList">
                <!-- Appointments will be added here -->
            </div>
        </div>

        <!-- Favorites Page -->
        <div class="page-container" id="favorites-page">
            <div class="development-message">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
        </div>

        <!-- Booking Modal -->
        <div class="booking-modal" id="bookingModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É</h2>
                    <button class="close-modal" id="closeModalBtn">√ó</button>
                </div>
                <div id="bookingDetails">
                    <!-- Booking details will be added here -->
                </div>
                <div class="form-group">
                    <label for="bookingDate">–î–∞—Ç–∞:</label>
                    <input type="date" id="bookingDate">
                </div>
                <div id="timeSelection">
                    <!-- Time slots or day off message will be added here -->
                </div>
                <button class="confirm-booking" id="confirmBookingBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
            </div>
        </div>

        <!-- Profile Panel -->
        <div class="profile-panel" id="profilePanel">
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">–ö</div>
                <div class="profile-name" id="profileName">–ì–æ—Å—Ç—å</div>
            </div>
            <div class="profile-menu">
                <div class="profile-menu-item">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                <div class="profile-menu-item">–ó–∞–ø–∏—Å–∏</div>
                <div class="profile-menu-item">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                <div class="profile-menu-item">–î–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</div>
                <div class="auth-action-btn register-btn" id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</div>
                <div class="auth-action-btn logout-btn" id="logoutBtn" style="display: none;">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</div>
            </div>
        </div>

        <!-- Overlay for profile panel -->
        <div class="overlay" id="overlay"></div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É
        function generateRandomRostovCoords() {
            // –¶–µ–Ω—Ç—Ä –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É
            const centerLat = 47.2225;
            const centerLng = 39.7185;
            
            // –†–∞–¥–∏—É—Å —Ä–∞–∑–±—Ä–æ—Å–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö (–ø—Ä–∏–º–µ—Ä–Ω–æ 5 –∫–º)
            const radius = 0.05;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–º–µ—â–µ–Ω–∏—è
            const randomLat = (Math.random() - 0.5) * radius;
            const randomLng = (Math.random() - 0.5) * radius;
            
            return {
                lat: centerLat + randomLat,
                lng: centerLng + randomLng
            };
        }

        // Data for specialists
        const specialists = [
{ 
                id: 1, 
                name: "–ú–∞–∫–∞—Ä", 
                specialty: "IT —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", 
                rating: 5.0, 
                lat: 47.2225, 
                lng: 39.7185,
                category: "design",
                phone: "+79281787683",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-18:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-18:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-18:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-18:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-17:00", dayIndex: 5 },
                    { day: "–°–±", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 6, isDayOff: true },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–π—Ç–∞", price: 15000, duration: "5-7 –¥–Ω–µ–π", image: "üåê" },
                    { id: 2, name: "–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞", price: 8000, duration: "3-5 –¥–Ω–µ–π", image: "üé®" },
                    { id: 3, name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞", price: 5000, duration: "1 –¥–µ–Ω—å", image: "üîß" }
                ]
            },
            { 
                id: 2, 
                name: "–ê–Ω–Ω–∞", 
                specialty: "–î–∏–∑–∞–π–Ω–µ—Ä –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤", 
                rating: 4.8, 
                lat: 47.2325, 
                lng: 39.7285,
                category: "design",
                schedule: [
                    { day: "–ü–Ω", time: "10:00-19:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "10:00-19:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "10:00-19:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "10:00-19:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "10:00-18:00", dayIndex: 5 },
                    { day: "–°–±", time: "11:00-15:00", dayIndex: 6 },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–î–∏–∑–∞–π–Ω –∫–≤–∞—Ä—Ç–∏—Ä—ã", price: 25000, duration: "7-10 –¥–Ω–µ–π", image: "üè†" },
                    { id: 2, name: "–î–∏–∑–∞–π–Ω –∫—É—Ö–Ω–∏", price: 15000, duration: "3-5 –¥–Ω–µ–π", image: "üç≥" },
                    { id: 3, name: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", price: 3000, duration: "1-2 —á–∞—Å–∞", image: "üí¨" }
                ]
            },
            { 
                id: 3, 
                name: "–î–º–∏—Ç—Ä–∏–π", 
                specialty: "–ü–æ–≤–∞—Ä", 
                rating: 4.9, 
                lat: 47.2125, 
                lng: 39.7085,
                category: "cooking",
                schedule: [
                    { day: "–ü–Ω", time: "8:00-17:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "8:00-17:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "8:00-17:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "8:00-17:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "8:00-16:00", dayIndex: 5 },
                    { day: "–°–±", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 6, isDayOff: true },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —É–∂–∏–Ω–∞", price: 5000, duration: "3-4 —á–∞—Å–∞", image: "üçΩÔ∏è" },
                    { id: 2, name: "–ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å", price: 3000, duration: "2 —á–∞—Å–∞", image: "üë®‚Äçüç≥" },
                    { id: 3, name: "–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é", price: 10000, duration: "2-3 –¥–Ω—è", image: "üìã" }
                ]
            },
            { 
                id: 4, 
                name: "–û–ª—å–≥–∞", 
                specialty: "–ö–ª–∏–Ω–∏–Ω–≥-–º–µ–Ω–µ–¥–∂–µ—Ä", 
                rating: 4.7, 
                lat: 47.2425, 
                lng: 39.7385,
                category: "cleaning",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-18:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-18:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-18:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-18:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-17:00", dayIndex: 5 },
                    { day: "–°–±", time: "10:00-14:00", dayIndex: 6 },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞", price: 5000, duration: "4-5 —á–∞—Å–æ–≤", image: "üßπ" },
                    { id: 2, name: "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —É–±–æ—Ä–∫–∞", price: 2000, duration: "1-2 —á–∞—Å–∞", image: "üè¢" },
                    { id: 3, name: "–•–∏–º—á–∏—Å—Ç–∫–∞ –º–µ–±–µ–ª–∏", price: 4000, duration: "2-3 —á–∞—Å–∞", image: "üõãÔ∏è" }
                ]
            },
            { 
                id: 5, 
                name: "–ï–ª–µ–Ω–∞", 
                specialty: "–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä", 
                rating: 4.9, 
                lat: 47.2525, 
                lng: 39.7485,
                category: "beauty",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-19:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-19:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-19:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-19:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-19:00", dayIndex: 5 },
                    { day: "–°–±", time: "10:00-17:00", dayIndex: 6 },
                    { day: "–í—Å", time: "10:00-15:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–ñ–µ–Ω—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: 1500, duration: "1 —á–∞—Å", image: "üíá‚Äç‚ôÄÔ∏è" },
                    { id: 2, name: "–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: 800, duration: "40 –º–∏–Ω", image: "üíá‚Äç‚ôÇÔ∏è" },
                    { id: 3, name: "–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ", price: 3000, duration: "2-3 —á–∞—Å–∞", image: "üé®" }
                ]
            },
            { 
                id: 6, 
                name: "–°–µ—Ä–≥–µ–π", 
                specialty: "–≠–ª–µ–∫—Ç—Ä–∏–∫", 
                rating: 4.6, 
                lat: 47.2625, 
                lng: 39.7585,
                category: "companies",
                schedule: [
                    { day: "–ü–Ω", time: "8:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "8:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "8:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "8:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "8:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "9:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "9:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–æ–∫", price: 1000, duration: "1 —á–∞—Å", image: "üîå" },
                    { id: 2, name: "–ó–∞–º–µ–Ω–∞ –ø—Ä–æ–≤–æ–¥–∫–∏", price: 8000, duration: "1 –¥–µ–Ω—å", image: "‚ö°" },
                    { id: 3, name: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", price: 500, duration: "30 –º–∏–Ω", image: "üí¨" }
                ]
            },
            { 
                id: 7, 
                name: "–ê–Ω–¥—Ä–µ–π –¢–∞—Ä–∞–¥–∞–Ω–æ–≤", 
                specialty: "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫", 
                rating: 5.0, 
                lat: 47.2725, 
                lng: 39.7685,
                category: "plumbing",
                phone: "+7 (988) 991-04-69",
                schedule: [
                    { day: "–ü–Ω", time: "8:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "8:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "8:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "8:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "8:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "9:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "9:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–ü–µ—Ä–µ–Ω–æ—Å —Ç—Ä—É–± –•–í–° –∏ –ì–í–°", price: 1500, duration: "1-2 —á–∞—Å–∞", image: "üîß" },
                    { id: 2, name: "–ú–æ–Ω—Ç–∞–∂ —Å–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç—Ä—É–±", price: 1500, duration: "1-2 —á–∞—Å–∞", image: "üõ†Ô∏è" },
                    { id: 3, name: "–ú–æ–Ω—Ç–∞–∂ —Ç—Ä—É–± –æ—Ç–æ–ø–ª–µ–Ω–∏—è", price: 2500, duration: "2-3 —á–∞—Å–∞", image: "üî•" },
                    { id: 4, name: "–î–µ–º–æ–Ω—Ç–∞–∂ —Ç—Ä—É–± –æ—Ç–æ–ø–ª–µ–Ω–∏—è", price: 2500, duration: "1-2 —á–∞—Å–∞", image: "üíß" },
                    { id: 5, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è", price: 2500, duration: "2-3 —á–∞—Å–∞", image: "üî©" },
                    { id: 6, name: "–ó–∞–º–µ–Ω–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è", price: 2500, duration: "2-3 —á–∞—Å–∞", image: "üîÑ" },
                    { id: 7, name: "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—Å–æ—Ä–∞", price: 1000, duration: "1 —á–∞—Å", image: "üöΩ" },
                    { id: 8, name: "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—Å–æ—Ä–æ–≤ –≤ —Å–∏—Ñ–æ–Ω–∞—Ö", price: 1000, duration: "1 —á–∞—Å", image: "ü™†" },
                    { id: 9, name: "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—Å–æ—Ä–∞ –≤ —Ç—É–∞–ª–µ—Ç–µ", price: 1000, duration: "1 —á–∞—Å", image: "üöæ" },
                    { id: 10, name: "–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—Å–æ—Ä–æ–≤ –≤ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏–∏", price: 1000, duration: "1 —á–∞—Å", image: "üåä" }
                ]
            },
            { 
                id: 8, 
                name: "–ï–ª–µ–Ω–∞ –ñ–µ—Å—Ç–∫–æ–≤–∞", 
                specialty: "–ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä", 
                rating: 5.0, 
                lat: 47.2825, 
                lng: 39.7785,
                category: "manicure",
                phone: "+7 (958) 797-84-46",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "9:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "10:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–ú–∞–Ω–∏–∫—é—Ä —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –≥–µ–ª—å-–ª–∞–∫–æ–º", price: 1200, duration: "1.5 —á–∞—Å–∞", image: "üíÖ" },
                    { id: 2, name: "–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä", price: 800, duration: "1 —á–∞—Å", image: "üîß" },
                    { id: 3, name: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –º–∞–Ω–∏–∫—é—Ä", price: 300, duration: "30 –º–∏–Ω", image: "üëë" },
                    { id: 4, name: "–°–Ω—è—Ç–∏–µ –≥–µ–ª—å-–ª–∞–∫–∞", price: 400, duration: "30 –º–∏–Ω", image: "üß¥" },
                    { id: 5, name: "–†–µ–º–æ–Ω—Ç –Ω–æ–≥—Ç—è", price: 200, duration: "15 –º–∏–Ω", image: "üî®" }
                ]
            },
            { 
                id: 9, 
                name: "–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –§–µ–ª—å–¥—à–µ—Ä–æ–≤–∞", 
                specialty: "–ö–ª–∏–Ω–∏–Ω–≥", 
                rating: 4.5, 
                lat: 47.2925, 
                lng: 39.7885,
                category: "cleaning",
                phone: "+7 (988) 572-23-28",
                schedule: [
                    { day: "–ü–Ω", time: "8:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "8:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "8:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "8:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "8:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "9:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "9:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–£–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞", price: 250, duration: "–†–∞—Å—á–µ—Ç –ø–æ –ø–ª–æ—â–∞–¥–∏", image: "üßπ" },
                    { id: 2, name: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è —É–±–æ—Ä–∫–∞", price: 100, duration: "–†–∞—Å—á–µ—Ç –ø–æ –ø–ª–æ—â–∞–¥–∏", image: "üè†" },
                    { id: 3, name: "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞", price: 250, duration: "–†–∞—Å—á–µ—Ç –ø–æ –ø–ª–æ—â–∞–¥–∏", image: "‚ú®" },
                    { id: 4, name: "–ú—ã—Ç—å—ë –æ–∫–æ–Ω", price: 1000, duration: "1-2 —á–∞—Å–∞", image: "ü™ü" },
                    { id: 5, name: "–ú—ã—Ç—å—ë –±–∞–ª–∫–æ–Ω–æ–≤", price: 4000, duration: "2-3 —á–∞—Å–∞", image: "üèûÔ∏è" }
                ]
            },
            { 
                id: 10, 
                name: "–ù–µ—Ä–∏–∑", 
                specialty: "–î–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã", 
                rating: 4.7, 
                lat: 47.3025, 
                lng: 39.7985,
                category: "water",
                phone: "+7 (988) 891-95-00",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-18:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-18:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-18:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-18:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-18:00", dayIndex: 5 },
                    { day: "–°–±", time: "10:00-15:00", dayIndex: 6 },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–î–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã (2 –±—É—Ç—ã–ª–∏)", price: 540, duration: "1-2 —á–∞—Å–∞", image: "üíß" },
                    { id: 2, name: "–î–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã (3 –±—É—Ç—ã–ª–∏)", price: 750, duration: "1-2 —á–∞—Å–∞", image: "üö∞" },
                    { id: 3, name: "–î–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã (4 –±—É—Ç—ã–ª–∏)", price: 880, duration: "1-2 —á–∞—Å–∞", image: "ü´ó" },
                    { id: 4, name: "–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–º–ø—ã", price: 400, duration: "1-2 —á–∞—Å–∞", image: "üîå" }
                ]
            },
            { 
                id: 11, 
                name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö.", 
                specialty: "–î–∏–∑–∞–π–Ω–µ—Ä", 
                rating: 4.9, 
                lat: 47.3125, 
                lng: 39.8085,
                category: "design",
                phone: "+7 (961) 277-88-19",
                schedule: [
                    { day: "–ü–Ω", time: "10:00-19:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "10:00-19:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "10:00-19:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "10:00-19:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "10:00-18:00", dayIndex: 5 },
                    { day: "–°–±", time: "11:00-16:00", dayIndex: 6 },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–î–∏–∑–∞–π–Ω –ª–æ–≥–æ—Ç–∏–ø–∞", price: 5000, duration: "3-5 –¥–Ω–µ–π", image: "üé®" },
                    { id: 2, name: "–î–∏–∑–∞–π–Ω –±–∞–Ω–Ω–µ—Ä–∞", price: 1000, duration: "1-2 –¥–Ω—è", image: "üñºÔ∏è" },
                    { id: 3, name: "–î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤", price: 1000, duration: "1-2 –¥–Ω—è", image: "üì¶" },
                    { id: 4, name: "–î–∏–∑–∞–π–Ω –¥–ª—è –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏–∏", price: 5000, duration: "3-5 –¥–Ω–µ–π", image: "üìÑ" }
                ]
            },
            { 
                id: 12, 
                name: "–ï–ª–µ–Ω–∞ –†–µ–≤—É—Ç–∞", 
                specialty: "–í–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä", 
                rating: 5.0, 
                lat: 47.3225, 
                lng: 39.8185,
                category: "design",
                phone: "+7 (989) 622-98-77",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-18:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-18:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-18:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-18:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-18:00", dayIndex: 5 },
                    { day: "–°–±", time: "10:00-15:00", dayIndex: 6 },
                    { day: "–í—Å", time: "–í—ã—Ö–æ–¥–Ω–æ–π", dayIndex: 0, isDayOff: true }
                ],
                services: [
                    { id: 1, name: "–î–∏–∑–∞–π–Ω –ª–µ–Ω–¥–∏–Ω–≥–∞", price: 15000, duration: "5-7 –¥–Ω–µ–π", image: "üåê" },
                    { id: 2, name: "–î–∏–∑–∞–π–Ω —Å–∞–π—Ç–∞-–≤–∏–∑–∏—Ç–∫–∏", price: 7000, duration: "3-5 –¥–Ω–µ–π", image: "üíº" },
                    { id: 3, name: "–î–∏–∑–∞–π–Ω –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞", price: 5000, duration: "3-5 –¥–Ω–µ–π", image: "üì±" },
                    { id: 4, name: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞", price: 5000, duration: "3-5 –¥–Ω–µ–π", image: "üîñ" }
                ]
            },
            { 
                id: 13, 
                name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ë.", 
                specialty: "–í—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞ –∏ –ø–µ—Ä–µ–µ–∑–¥—ã", 
                rating: 4.3, 
                lat: 47.3325, 
                lng: 39.8285,
                category: "moving",
                phone: "+7 (988) 992-31-20",
                schedule: [
                    { day: "–ü–Ω", time: "8:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "8:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "8:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "8:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "8:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "9:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "9:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–í—ã–≤–æ–∑ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º—É—Å–æ—Ä–∞", price: "-", duration: "2-3 —á–∞—Å–∞", image: "üóëÔ∏è" },
                    { id: 2, name: "–í—ã–≤–æ–∑ —Å—Ç–∞—Ä–æ–π –º–µ–±–µ–ª–∏", price: "-", duration: "1-2 —á–∞—Å–∞", image: "üõãÔ∏è" },
                    { id: 3, name: "–í—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞ –≥–∞–∑–µ–ª—å—é", price: "-", duration: "2-4 —á–∞—Å–∞", image: "üöö" },
                    { id: 4, name: "–í—ã–≤–æ–∑ —Å—Ç–∞—Ä–æ–π —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∏", price: "-", duration: "1-2 —á–∞—Å–∞", image: "üöΩ" }
                ]
            },
            { 
                id: 14, 
                name: "–í–ª–∞–¥–∏–º–∏—Ä", 
                specialty: "–ë–∞—Ä–±–µ—Ä", 
                rating: 4.9, 
                lat: 47.3425, 
                lng: 39.8385,
                category: "barber",
                phone: "+7 (928) 121-92-83",
                schedule: [
                    { day: "–ü–Ω", time: "9:00-20:00", dayIndex: 1 },
                    { day: "–í—Ç", time: "9:00-20:00", dayIndex: 2 },
                    { day: "–°—Ä", time: "9:00-20:00", dayIndex: 3 },
                    { day: "–ß—Ç", time: "9:00-20:00", dayIndex: 4 },
                    { day: "–ü—Ç", time: "9:00-20:00", dayIndex: 5 },
                    { day: "–°–±", time: "10:00-18:00", dayIndex: 6 },
                    { day: "–í—Å", time: "10:00-16:00", dayIndex: 0 }
                ],
                services: [
                    { id: 1, name: "–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: "1000-3000", duration: "1 —á–∞—Å", image: "‚úÇÔ∏è" },
                    { id: 2, name: "–ñ–µ–Ω—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: "2500-5000", duration: "1.5 —á–∞—Å–∞", image: "üíá‚Äç‚ôÄÔ∏è" },
                    { id: 3, name: "–î–µ—Ç—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: "500-1500", duration: "45 –º–∏–Ω", image: "üë∂" }
                ]
        }
        ];

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–µ
        specialists.forEach(specialist => {
            const newCoords = generateRandomRostovCoords();
            specialist.lat = newCoords.lat;
            specialist.lng = newCoords.lng;
        });

        // –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        let currentUser = null;
        let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
        let map;
        let markers = [];
        let currentSpecialist = null;
        let currentService = null;
        let pendingBooking = null; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å localStorage
        function saveUserData() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        function loadUserData() {
            const userData = localStorage.getItem('currentUser');
            if (userData) {
                currentUser = JSON.parse(userData);
                return true;
            }
            return false;
        }

        function clearUserData() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('appointments');
            currentUser = null;
            appointments = [];
        }

        // –§—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function showAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function hideAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã
            document.getElementById('authName').value = '';
            document.getElementById('authPassword').value = '';
        }

        function register(username, password) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
            // –î–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = {
                username: username,
                firstLetter: username.charAt(0).toUpperCase()
            };
            
            saveUserData();
            updateUIForUser();
            hideAuthModal();
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—ã–ø–æ–ª–Ω—è–µ–º –µ–≥–æ
            if (pendingBooking) {
                completeBooking(pendingBooking);
                pendingBooking = null;
            }
            
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!');
        }

        function login(username, password) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º
            // –î–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = {
                username: username,
                firstLetter: username.charAt(0).toUpperCase()
            };
            
            saveUserData();
            updateUIForUser();
            hideAuthModal();
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—ã–ø–æ–ª–Ω—è–µ–º –µ–≥–æ
            if (pendingBooking) {
                completeBooking(pendingBooking);
                pendingBooking = null;
            }
        }

        function logout() {
            clearUserData();
            updateUIForUser();
            updateAppointmentsList();
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –ø—Ä–æ—Ñ–∏–ª—è
            document.getElementById('profilePanel').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
            
            alert('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞');
        }

        function updateUIForUser() {
            if (currentUser) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä–∫—É –∏ –∏–º—è
                document.getElementById('profileBtn').textContent = currentUser.firstLetter;
                document.getElementById('profileAvatar').textContent = currentUser.firstLetter;
                document.getElementById('profileName').textContent = currentUser.username;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                document.getElementById('logoutBtn').style.display = 'block';
                document.getElementById('registerBtn').style.display = 'none';
            } else {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ –≥–æ—Å—Ç–µ–≤–æ–π —Ä–µ–∂–∏–º
                document.getElementById('profileBtn').textContent = '–ö';
                document.getElementById('profileAvatar').textContent = '–ö';
                document.getElementById('profileName').textContent = '–ì–æ—Å—Ç—å';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞
                document.getElementById('logoutBtn').style.display = 'none';
                document.getElementById('registerBtn').style.display = 'block';
            }
        }

        function checkAuth() {
            if (loadUserData()) {
                updateUIForUser();
                return true;
            }
            return false;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        function completeBooking(bookingData) {
            const { date, time, specialist, service } = bookingData;
            
            const appointment = {
                id: Date.now(),
                specialistId: specialist.id,
                specialistName: specialist.name,
                specialistPhone: specialist.phone || null,
                serviceName: service.name,
                servicePrice: service.price,
                date: date,
                time: time,
                timestamp: new Date(`${date}T${time}:00`).getTime()
            };
            
            appointments.push(appointment);
            localStorage.setItem('appointments', JSON.stringify(appointments));
            
            alert('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!');
            closeBookingModal();
            
            // Switch to appointments page
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelector('[data-page="appointments"]').classList.add('active');
            document.querySelectorAll('.page-container').forEach(page => page.classList.remove('active'));
            document.getElementById('appointments-page').classList.add('active');
            
            // Update appointments list
            updateAppointmentsList();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const authModal = document.getElementById('authModal');
            const authTitle = document.getElementById('authTitle');
            const authButton = document.getElementById('authButton');
            const authSwitch = document.getElementById('authSwitch');
            const authName = document.getElementById('authName');
            const authPassword = document.getElementById('authPassword');
            
            let isLoginMode = false; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–∂–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            
            authButton.addEventListener('click', function() {
                const username = authName.value.trim();
                const password = authPassword.value.trim();
                
                if (!username || !password) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    return;
                }
                
                if (isLoginMode) {
                    login(username, password);
                } else {
                    register(username, password);
                }
            });
            
            authSwitch.addEventListener('click', function() {
                isLoginMode = !isLoginMode;
                
                if (isLoginMode) {
                    authTitle.textContent = '–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç';
                    authButton.textContent = '–í–æ–π—Ç–∏';
                    authSwitch.textContent = '–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç';
                } else {
                    authTitle.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
                    authButton.textContent = '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è';
                    authSwitch.textContent = '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç';
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            authModal.addEventListener('click', function(e) {
                if (e.target === authModal) {
                    hideAuthModal();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –ø–∞–Ω–µ–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è
            document.getElementById('registerBtn').addEventListener('click', function() {
                showAuthModal();
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –ø—Ä–æ—Ñ–∏–ª—è
                document.getElementById('profilePanel').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            checkAuth();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            generateCards();
            setupCategoryFilter();
            updateAppointmentsList();
            
            // Update countdown every minute
            setInterval(updateAppointmentsList, 60000);
        });

        // Initialize the map
        function initMap() {
            // Set initial view to Rostov-on-Don
            map = L.map('map', {
                zoomControl: false,
                attributionControl: false
            }).setView([47.2225, 39.7185], 13);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18
            }).addTo(map);
            
            L.control.zoom({
                position: 'bottomright'
            }).addTo(map);
            
            specialists.forEach(specialist => {
                // Use different colors for markers
                const markerColor = specialist.rating >= 4.8 ? 'green' : 'yellow';
                
                const marker = L.marker([specialist.lat, specialist.lng], {
                    icon: L.divIcon({
                        className: `custom-marker ${markerColor}`,
                        html: `<div style="background-color: ${markerColor}; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,
                        iconSize: [20, 20],
                        iconAnchor: [10, 10]
                    })
                })
                .addTo(map)
                .bindPopup(`
                    <div>
                        <b>${specialist.name}</b><br>
                        ${specialist.specialty}<br>
                        –†–µ–π—Ç–∏–Ω–≥: ${specialist.rating}<br>
                        <button onclick="showSpecialistCard(${specialist.id})">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    </div>
                `);
                
                marker.on('click', function() {
                    showSpecialistCard(specialist.id);
                });
                
                markers.push(marker);
            });
        }

        function showSpecialistCard(specialistId) {
            const specialist = specialists.find(s => s.id === specialistId);
            if (!specialist) return;
            
            currentSpecialist = specialist;
            
            const card = document.getElementById('specialistCard');
            const name = document.getElementById('specialistName');
            const specialty = document.getElementById('specialistSpecialty');
            const rating = document.getElementById('specialistRating');
            const horizontalSchedule = document.getElementById('horizontalSchedule');
            const servicesGrid = document.getElementById('servicesGrid');
            const servicesSection = document.getElementById('servicesSection');
            
            name.textContent = specialist.name;
            specialty.textContent = specialist.specialty;
            rating.textContent = specialist.rating;
            
            // Hide services initially
            servicesSection.classList.remove('active');
            
            // Update schedule
            horizontalSchedule.innerHTML = '';
            specialist.schedule.forEach(item => {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'schedule-item';
                scheduleItem.innerHTML = `
                    <div class="schedule-day">${item.day}</div>
                    <div class="schedule-time">${item.time}</div>
                `;
                horizontalSchedule.appendChild(scheduleItem);
            });
            
            // Update services
            servicesGrid.innerHTML = '';
            specialist.services.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card';
                serviceCard.innerHTML = `
                    <div class="service-image">${service.image}</div>
                    <div class="service-name">${service.name}</div>
                    <div class="service-price">${service.price} —Ä—É–±.</div>
                    <div class="service-duration">${service.duration}</div>
                `;
                serviceCard.addEventListener('click', () => openBookingModal(specialist, service));
                servicesGrid.appendChild(serviceCard);
            });
            
            card.classList.add('active');
        }

        function closeSpecialistCard() {
            const card = document.getElementById('specialistCard');
            card.classList.remove('active');
        }

        function openBookingModal(specialist, service) {
            currentSpecialist = specialist;
            currentService = service;
            
            const modal = document.getElementById('bookingModal');
            const bookingDetails = document.getElementById('bookingDetails');
            const timeSelection = document.getElementById('timeSelection');
            
            // Set booking details
            bookingDetails.innerHTML = `
                <h3>${service.name}</h3>
                <p>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç: ${specialist.name}</p>
                <p>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${service.price} —Ä—É–±.</p>
                <p>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${service.duration}</p>
            `;
            
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('bookingDate');
            dateInput.min = today;
            dateInput.value = today;
            
            // Generate time slots for today initially
            updateTimeSlots(today);
            
            // Add event listener for date change
            dateInput.addEventListener('change', function() {
                updateTimeSlots(this.value);
            });
            
            modal.classList.add('active');
        }

        function updateTimeSlots(selectedDate) {
            const timeSelection = document.getElementById('timeSelection');
            const dayOfWeek = new Date(selectedDate).getDay(); // 0 - Sunday, 1 - Monday, etc.
            
            // Find schedule for this day
            const daySchedule = currentSpecialist.schedule.find(s => s.dayIndex === dayOfWeek);
            
            // Clear previous content
            timeSelection.innerHTML = '';
            
            // Check if it's a day off
            if (daySchedule && daySchedule.isDayOff) {
                timeSelection.innerHTML = `
                    <div class="day-off-message">
                        –í —ç—Ç–æ—Ç –¥–µ–Ω—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.
                    </div>
                `;
                document.getElementById('confirmBookingBtn').disabled = true;
                return;
            }
            
            // If it's a working day, generate time slots
            if (daySchedule && daySchedule.time && daySchedule.time !== '–í—ã—Ö–æ–¥–Ω–æ–π') {
                // Parse working hours
                const [startTime, endTime] = daySchedule.time.split('-');
                const startHour = parseInt(startTime.split(':')[0]);
                const endHour = parseInt(endTime.split(':')[0]);
                
                // Generate time slots
                const timeSlotsContainer = document.createElement('div');
                timeSlotsContainer.className = 'time-slots';
                
                let hasAvailableSlots = false;
                
                for (let hour = startHour; hour < endHour; hour++) {
                    for (let minute = 0; minute < 60; minute += 30) {
                        const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                        
                        // Check if this time is in the past for today
                        const isToday = selectedDate === new Date().toISOString().split('T')[0];
                        let isDisabled = false;
                        
                        if (isToday) {
                            const now = new Date();
                            const slotTime = new Date();
                            slotTime.setHours(hour, minute, 0, 0);
                            
                            if (slotTime < now) {
                                isDisabled = true;
                            }
                        }
                        
                        if (!isDisabled) {
                            hasAvailableSlots = true;
                        }
                        
                        const timeSlot = document.createElement('div');
                        timeSlot.className = `time-slot ${isDisabled ? 'disabled' : ''}`;
                        timeSlot.textContent = timeString;
                        
                        if (!isDisabled) {
                            timeSlot.addEventListener('click', function() {
                                document.querySelectorAll('.time-slot').forEach(ts => {
                                    if (!ts.classList.contains('disabled')) {
                                        ts.classList.remove('selected');
                                    }
                                });
                                timeSlot.classList.add('selected');
                            });
                        }
                        
                        timeSlotsContainer.appendChild(timeSlot);
                    }
                }
                
                if (hasAvailableSlots) {
                    document.getElementById('confirmBookingBtn').disabled = false;
                    
                    const timeLabel = document.createElement('label');
                    timeLabel.textContent = '–í—Ä–µ–º—è:';
                    timeLabel.style.display = 'block';
                    timeLabel.style.marginBottom = '5px';
                    timeLabel.style.fontWeight = '500';
                    timeSelection.appendChild(timeLabel);
                    
                    timeSelection.appendChild(timeSlotsContainer);
                } else {
                    document.getElementById('confirmBookingBtn').disabled = true;
                    timeSelection.innerHTML = `
                        <div class="no-time-message">
                            –°–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ—Ç, –≤—ã–±–µ—Ä–µ—Ç–µ –¥—Ä—É–≥–æ–π –¥–µ–Ω—å
                        </div>
                    `;
                }
            } else {
                timeSelection.innerHTML = `
                    <div class="day-off-message">
                        –í —ç—Ç–æ—Ç –¥–µ–Ω—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.
                    </div>
                `;
                document.getElementById('confirmBookingBtn').disabled = true;
            }
        }

        function closeBookingModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.remove('active');
            pendingBooking = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        }

        function confirmBooking() {
            const date = document.getElementById('bookingDate').value;
            const selectedTime = document.querySelector('.time-slot.selected');
            
            if (!date || !selectedTime) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è');
                return;
            }
            
            const time = selectedTime.textContent;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            if (!currentUser) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                pendingBooking = {
                    date: date,
                    time: time,
                    specialist: currentSpecialist,
                    service: currentService
                };
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                showAuthModal();
                closeBookingModal();
                alert('–î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è');
                return;
            }
            
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –≤—ã–ø–æ–ª–Ω—è–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            completeBooking({
                date: date,
                time: time,
                specialist: currentSpecialist,
                service: currentService
            });
        }

        function cancelAppointment(appointmentId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å?')) {
                appointments = appointments.filter(app => app.id !== appointmentId);
                localStorage.setItem('appointments', JSON.stringify(appointments));
                updateAppointmentsList();
            }
        }

        function updateAppointmentsList() {
            const appointmentsList = document.getElementById('appointmentsList');
            appointmentsList.innerHTML = '';
            
            if (appointments.length === 0) {
                appointmentsList.innerHTML = '<p>–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π</p>';
                return;
            }
            
            // Sort appointments by date
            appointments.sort((a, b) => a.timestamp - b.timestamp);
            
            appointments.forEach(appointment => {
                const now = new Date().getTime();
                const timeUntil = appointment.timestamp - now;
                
                // Only show upcoming appointments
                if (timeUntil < 0) return;
                
                const days = Math.floor(timeUntil / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeUntil % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));
                
                // Calculate progress (for demo, we'll use a fixed progress)
                const progress = Math.min(100, 100 - (timeUntil / (7 * 24 * 60 * 60 * 1000)) * 100);
                
                const appointmentCard = document.createElement('div');
                appointmentCard.className = 'appointment-card';
                
                let phoneSection = '';
                if (appointment.specialistPhone) {
                    phoneSection = `
                        <div class="specialist-phone">
                            –ù–∞–ø–∏—à–∏—Ç–µ —ç—Ç–æ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É: ${appointment.specialistPhone}
                        </div>
                    `;
                }
                
                appointmentCard.innerHTML = `
                    <div class="appointment-header">
                        <div class="appointment-specialist">${appointment.specialistName}</div>
                        <div class="appointment-service">${appointment.serviceName} - ${appointment.servicePrice} —Ä—É–±.</div>
                    </div>
                    <div class="appointment-time">
                        <i class="far fa-calendar"></i>
                        <span>${appointment.date} –≤ ${appointment.time}</span>
                    </div>
                    <div class="countdown">
                        –î–æ –∑–∞–ø–∏—Å–∏: ${days}–¥ ${hours}—á ${minutes}–º
                    </div>
                    <div class="progress-bar">
                        <div class="progress" style="width: ${progress}%"></div>
                    </div>
                    ${phoneSection}
                    <button class="cancel-btn" data-id="${appointment.id}">–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
                `;
                appointmentsList.appendChild(appointmentCard);
            });
            
            // Add event listeners to cancel buttons
            document.querySelectorAll('.cancel-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const appointmentId = parseInt(this.getAttribute('data-id'));
                    cancelAppointment(appointmentId);
                });
            });
        }

        function generateCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';
            
            specialists.forEach(specialist => {
                const card = document.createElement('div');
                card.className = 'card';
                card.setAttribute('data-category', specialist.category);
                card.innerHTML = `
                    <div class="card-header">
                        <div class="name">${specialist.name}</div>
                        <div class="specialty">${specialist.specialty}</div>
                        <div class="rating">
                            <span class="star">‚òÖ</span>
                            <span>${specialist.rating}</span>
                        </div>
                    </div>
                    <button class="show-services-btn" data-id="${specialist.id}">–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥–∏</button>
                    <div class="services-section" id="services-${specialist.id}">
                        <h4>–£—Å–ª—É–≥–∏:</h4>
                        <div class="services-grid">
                            ${specialist.services.map(service => `
                                <div class="service-card" onclick="openBookingModal(${JSON.stringify(specialist).replace(/"/g, '&quot;')}, ${JSON.stringify(service).replace(/"/g, '&quot;')})">
                                    <div class="service-image">${service.image}</div>
                                    <div class="service-name">${service.name}</div>
                                    <div class="service-price">${service.price} —Ä—É–±.</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <button class="show-schedule-btn" data-id="${specialist.id}">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
                    <div class="horizontal-schedule-container" id="schedule-container-${specialist.id}">
                        <div class="horizontal-schedule" id="schedule-${specialist.id}">
                            <!-- Schedule will be added here -->
                        </div>
                    </div>
                `;
                container.appendChild(card);
                
                const scheduleContainer = document.getElementById(`schedule-${specialist.id}`);
                specialist.schedule.forEach(item => {
                    const scheduleItem = document.createElement('div');
                    scheduleItem.className = 'schedule-item';
                    scheduleItem.innerHTML = `
                        <div class="schedule-day">${item.day}</div>
                        <div class="schedule-time">${item.time}</div>
                    `;
                    scheduleContainer.appendChild(scheduleItem);
                });
            });
            
            document.querySelectorAll('.show-schedule-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const specialistId = this.getAttribute('data-id');
                    const scheduleContainer = document.getElementById(`schedule-container-${specialistId}`);
                    scheduleContainer.classList.toggle('active');
                    this.textContent = scheduleContainer.classList.contains('active') ? '–°–∫—Ä—ã—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ';
                });
            });
            
            document.querySelectorAll('.show-services-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const specialistId = this.getAttribute('data-id');
                    const servicesSection = document.getElementById(`services-${specialistId}`);
                    servicesSection.classList.toggle('active');
                    this.textContent = servicesSection.classList.contains('active') ? '–°–∫—Ä—ã—Ç—å —É—Å–ª—É–≥–∏' : '–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥–∏';
                });
            });
        }

        // Category filter functionality
        function setupCategoryFilter() {
            const categoryBtns = document.querySelectorAll('.category-btn');
            const cards = document.querySelectorAll('.card');
            
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Update active button
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter cards
                    cards.forEach(card => {
                        if (category === 'all' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        }

        // Navigation functionality
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const pageId = this.getAttribute('data-page') + '-page';
                document.querySelectorAll('.page-container').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
                
                if (pageId === 'search-page' && !map) {
                    initMap();
                }
                
                if (pageId === 'appointments-page') {
                    updateAppointmentsList();
                }
                
                if (pageId !== 'search-page') {
                    closeSpecialistCard();
                }
            });
        });

        // Profile panel functionality
        const profileBtn = document.getElementById('profileBtn');
        const profilePanel = document.getElementById('profilePanel');
        const overlay = document.getElementById('overlay');
        
        profileBtn.addEventListener('click', function() {
            profilePanel.classList.add('active');
            overlay.classList.add('active');
        });
        
        overlay.addEventListener('click', function() {
            profilePanel.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Close card button functionality
        const closeCardBtn = document.getElementById('closeCardBtn');
        closeCardBtn.addEventListener('click', closeSpecialistCard);

        // Show services button in specialist card
        const showServicesBtn = document.getElementById('showServicesBtn');
        showServicesBtn.addEventListener('click', function() {
            const servicesSection = document.getElementById('servicesSection');
            servicesSection.classList.toggle('active');
            this.textContent = servicesSection.classList.contains('active') ? '–°–∫—Ä—ã—Ç—å —É—Å–ª—É–≥–∏' : '–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥–∏';
        });

        // Booking modal functionality
        const closeModalBtn = document.getElementById('closeModalBtn');
        const confirmBookingBtn = document.getElementById('confirmBookingBtn');
        
        closeModalBtn.addEventListener('click', closeBookingModal);
        confirmBookingBtn.addEventListener('click', confirmBooking);
    </script>
</body>
    </html>
